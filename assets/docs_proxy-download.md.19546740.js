/**
 * name: website
 * version: v0.0.0
 * description: Provides the ability to quickly create preset projects.
 * author: chengpeiquan
 * homepage: https://preset.js.org/
 */
import{_ as e,a as s}from"./chunks/github-repo-workflow.befc6a47.js";import{_ as a,c as o,o as n,U as t}from"./chunks/framework.6508935e.js";const b=JSON.parse('{"title":"Proxy Download","description":"","frontmatter":{},"headers":[],"relativePath":"docs/proxy-download.md","filePath":"docs/proxy-download.md"}'),l={name:"docs/proxy-download.md"},r=t('<h1 id="proxy-download" tabindex="-1">Proxy Download <a class="header-anchor" href="#proxy-download" aria-label="Permalink to &quot;Proxy Download {#proxy-download}&quot;">​</a></h1><p>For the slow download problem in some areas, we provide the mirror proxy to speed up the download. You can use the <code>proxy</code> (alias <code>p</code>) command to turn on/off of the proxy . This command needs to be used in conjunction with subcommands.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Proxy downloads is mainly used by developers in mainland China. Please experience whether it works in other regions.</p></div><h2 id="turn-on" tabindex="-1">Turn on <a class="header-anchor" href="#turn-on" aria-label="Permalink to &quot;Turn on {#turn-on}&quot;">​</a></h2><p>The proxy service can be turned on with the <code>on</code> subcommand of <code>proxy</code>.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">preset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span></span></code></pre></div><p>After it is enabled, the mirror URL will be used to request configuration files. When downloading templates, if there is a mirror service for the template, the mirror URL will also be used to download.</p><h2 id="turn-off" tabindex="-1">Turn off <a class="header-anchor" href="#turn-off" aria-label="Permalink to &quot;Turn off {#turn-off}&quot;">​</a></h2><p>The proxy service can be turned off with the <code>off</code> subcommand of <code>proxy</code>.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">preset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">off</span></span></code></pre></div><p>After turn off, the URL of Preset official website will be used to request the configuration file, and the downloaded template will no longer go through the mirror source, but will be downloaded directly through the GitHub repo(or other source code hosting platforms).</p><h2 id="about-mirror-sources" tabindex="-1">About mirror sources <a class="header-anchor" href="#about-mirror-sources" aria-label="Permalink to &quot;About mirror sources {#about-mirror-sources}&quot;">​</a></h2><p>According to <a href="./starter-template#rules-for-adding-templates">Rules for adding templates</a>, add <code>mirror</code> field in the configuration file of the template, pointing to the URL of a mirror repository, when the proxy is enabled and the configuration of the template exists<code> mirror</code> field, the mirror source will be used to download.</p><p>In mainland China, it is recommended to use <a href="https://gitee.com" target="_blank" rel="noreferrer">Gitee</a>, <a href="https://www.jihulab.com" target="_blank" rel="noreferrer">Jihu GitLab</a>, <a href="https://coding.net/" target="_blank" rel="noreferrer">CODING DevOps</a> And other code hosting platforms are used as mirror repository. Compared with GitHub, their access speed in mainland China will be very fast.</p><h2 id="set-mirror-synchronization-rules" tabindex="-1">Set mirror synchronization rules <a class="header-anchor" href="#set-mirror-synchronization-rules" aria-label="Permalink to &quot;Set mirror synchronization rules {#set-mirror-synchronization-rules}&quot;">​</a></h2><p>Take the main repository in GitHub and the mirror repository in Gitee as an example. When maintaining the code of the GitHub repository, it is not necessary to manually push it to Gitee to ensure real-time synchronization of the code.</p><p>The following is an example of using GitHub Actions to implement automatic code push. Template maintainers Can be used for reference.</p><h3 id="generate-ssh-key" tabindex="-1">Generate SSH Key <a class="header-anchor" href="#generate-ssh-key" aria-label="Permalink to &quot;Generate SSH Key {#generate-ssh-key}&quot;">​</a></h3><p>If you have not generated an SSH Key for your Git account, you need to create it first. In the Workflow of GitHub Actions, SSH will be used for authentication.</p><p>Please open the command line tool first, enter the following command and press Enter to run:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh-keygen</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ed25519</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_email@example.com</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Please be careful not to set a password for the SSH Key, you can press Enter three times to directly confirm the question on the command line, and directly generate an SSH Key without a password.</p></div><h3 id="get-public-key" tabindex="-1">Get public key <a class="header-anchor" href="#get-public-key" aria-label="Permalink to &quot;Get public key {#get-public-key}&quot;">​</a></h3><p>Use the following command at the command line to obtain the SSH public key you just generated:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/id_ed25519.pub</span></span></code></pre></div><p>Open Gitee&#39;s personal account <a href="https://gitee.com/profile/sshkeys" target="_blank" rel="noreferrer">SSH public key setting page</a> in the browser, and add the public key to the account profile.</p><h3 id="get-private-key" tabindex="-1">Get private key <a class="header-anchor" href="#get-private-key" aria-label="Permalink to &quot;Get private key {#get-private-key}&quot;">​</a></h3><p>Obtain the SSH private key using the following command at the command line:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/id_ed25519</span></span></code></pre></div><p>Open the template project repository on GitHub in the browser, enter the settings page of the repository, add a Repository Secret, and configure the obtained private key into it.</p><p><img src="'+e+'" alt="Github Repo Secrets"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Since the data provided by this function are constants, they are usually named with all capital letters and underscores. For example, the SSH private key of Gitee is named <code>GITEE_SSH_PRIVATE_KEY</code> here.</p></div><h3 id="write-workflow" tabindex="-1">Write Workflow <a class="header-anchor" href="#write-workflow" aria-label="Permalink to &quot;Write Workflow {#write-workflow}&quot;">​</a></h3><p>Open the template project repository on GitHub in the browser, and create a file with the storage path <code>./.github/workflows/sync-to-mirror.yml</code> in the root directory of the project:</p><p><img src="'+s+`" alt="Github Repo Workflow"></p><p>Configure the following code into the YAML file:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sync-to-mirror</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># Which actions can trigger Workflow</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pull_request</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">#  Which branchs can trigger Workflow</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">master</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">main</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build-and-deploy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Sync to Gitee</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wearerequired/git-mirror-action@master</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># Read private key data named \`GITEE_SSH_PRIVATE_KEY\`</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># All Repository Secret data is obtained through the \`secrets\` variable.</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">SSH_PRIVATE_KEY</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.GITEE_SSH_PRIVATE_KEY }}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># The URL of the source code repository</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">source-repo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/awesome-starter/vue3-ts-vite-starter.git</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># The URL of the mirror repository(requires an SSH URL)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">destination-repo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">git@gitee.com:awesome-starter/vue3-ts-vite-starter.git</span></span></code></pre></div><p>After the YAML file is configured and submitted to the repository along with the code, when the specified action occurs in the subsequent specified branch, the workflow will be automatically triggered to automatically complete the synchronization of the code.</p><p>If you need to synchronize to multiple repositories, you can configure multiple mirror mappings and key distribution under <code>steps</code> according to the format configuration.</p>`,39),p=[r];function i(c,h,d,y,u,m){return n(),o("div",null,p)}const D=a(l,[["render",i]]);export{b as __pageData,D as default};
